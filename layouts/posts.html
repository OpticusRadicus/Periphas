<!DOCTYPE html>
<html>
<head>
	<title>First MEAN App by Jamie Buell</title>
	<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
</head>
<body ng-app='app'>
	
	
<div ng-controller='PostsCtrl' class='container'>
	<h1>Recent Posts</h1>

<input ng-model='postBody' class='form-control'/>

<button ng-click='addPost()' class='btn btn-default'>Add Post</button>
	<ul class='list-group'>
		<li ng-repeat='post in posts' class='ist-group-item'>
			<strong>@{{ post.username }} </strong>
			<span>{{ post.body }}</span>
		</li>
	</ul>

</div>

	

<script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.js'></script>

<script type="text/javascript">
var app = angular.module('app', []) 
app.controller('PostsCtrl', function ($scope, $http) {

$scope.addPost = function () {
	if ($scope.postBody) {
		$http.post('/api/posts', {
		username: 'TestAdder',
		body: $scope.postBody
	}).success(function (post) {
		$scope.posts.unshift(post)
		$scope.postBody = null
})
	
}
}

$http.get('http://localhst:3000/api/posts')
.success(function (posts){
 $scope.posts = posts


})

</script>

</body>
</html>